<title>LED-产品编辑</title>

<link rel="stylesheet" href="../../assets/css/jquery-ui.custom.css"/>
<link rel="stylesheet" href="../../assets/css/chosen.css"/>
<link rel="stylesheet" href="../../assets/css/datepicker.css"/>
<link rel="stylesheet" href="../../assets/css/bootstrap-timepicker.css"/>
<link rel="stylesheet" href="../../assets/css/daterangepicker.css"/>
<link rel="stylesheet" href="../../assets/css/bootstrap-datetimepicker.css"/>
<link rel="stylesheet" href="../../assets/css/colorpicker.css"/>

<!-- ajax layout which only needs content area -->
<div class="page-header">
    <h1>
        LED
        <small>
            <i class="ace-icon fa fa-angle-double-right"></i>
            编辑
        </small>
    </h1>
</div><!-- /.page-header -->

<!-- ajax layout which only needs content area -->
<div class="row">
    <div class="col-xs-12">
        <!-- PAGE CONTENT BEGINS -->
        <form class="form-horizontal" role="form" action="/led/publish" method="post">

            <!-- 生产商 begins -->
            <div class="form-group">
                <label for="form-field-1" class="col-xs-12 col-sm-3 control-label no-padding-right">生产商<b
                        class="text-danger">&nbsp;*</b></label>

                <div class="col-xs-12 col-sm-5">
                    <span class="block input-icon input-icon-right">
                        <input type="text" required="required" id="form-field-1" placeholder="生产商" name="producer"
                               title="请输入生产商"
                               class="width-100"/>
                        <i class="ace-icon fa fa-times-circle hide"></i>
                    </span>
                </div>
            </div>
            <!-- 生产商 ends -->

            <!-- 联系人 begins -->
            <div class="form-group">
                <label for="form-field-2" class="col-xs-12 col-sm-3 control-label no-padding-right">联系人<b
                        class="text-danger">&nbsp;*</b></label>

                <div class="col-xs-12 col-sm-5">
                    <span class="block input-icon input-icon-right">
                        <input type="text" required="required" id="form-field-2" placeholder="联系人" name="contact"
                               title="请输入联系人"
                               class="width-100"/>
                        <i class="ace-icon fa fa-times-circle hide"></i>
                    </span>
                </div>
            </div>
            <!-- 联系人 ends -->

            <!-- 联系电话 begins -->
            <div class="form-group">
                <label for="form-field-3" class="col-xs-12 col-sm-3 control-label no-padding-right">联系电话</label>

                <div class="col-xs-12 col-sm-5">
                    <span class="block input-icon input-icon-right">
                        <input type="text" id="form-field-3" placeholder="联系电话" title="请输入联系电话" name="phone"
                               class="width-100"/>
                        <i class="ace-icon fa fa-times-circle hide"></i>
                    </span>
                </div>
            </div>
            <!-- 联系电话 ends -->

            <!-- 联系Email begins -->
            <div class="form-group">
                <label for="form-field-4" class="col-xs-12 col-sm-3 control-label no-padding-right">Email</label>

                <div class="col-xs-12 col-sm-5">
                    <span class="block input-icon input-icon-right">
                        <input type="email" id="form-field-4" placeholder="Email" title="请输入Email" name="email"
                               class="width-100"/>
                        <i class="ace-icon fa fa-times-circle hide"></i>
                    </span>
                </div>
            </div>
            <!-- 联系Email ends -->

            <!-- 型号 begins -->
            <div class="form-group">
                <label for="form-field-5" class="col-xs-12 col-sm-3 control-label no-padding-right">型号<b
                        class="text-danger">&nbsp;*</b></label>

                <div class="col-xs-12 col-sm-5">
                    <span class="block input-icon input-icon-right">
                        <input type="text" required="required" id="form-field-5" placeholder="型号" name="typ"
                               title="请输入型号"
                               class="width-100"/>
                        <i class="ace-icon fa fa-times-circle hide"></i>
                    </span>
                </div>
            </div>
            <!-- 型号 ends -->

            <!-- 色温 begins -->
            <div class="form-group">
                <label for="form-field-6" class="col-xs-12 col-sm-3 control-label no-padding-right">色温<b
                        class="text-danger">&nbsp;*</b></label>

                <div class="col-xs-12 col-sm-5">
                    <span class="block input-icon input-icon-right">
                        <input type="text" required="required" id="form-field-6" placeholder="色温"
                               name="colourTemperature" title="请输入色温"
                               class="width-100"/>
                        <i class="ace-icon fa fa-times-circle hide"></i>
                    </span>
                </div>
            </div>
            <!-- 色温 ends -->

            <!-- 亮度 begins -->
            <div class="form-group">
                <label for="form-field-7" class="col-xs-12 col-sm-3 control-label no-padding-right">亮度<b
                        class="text-danger">&nbsp;*</b></label>

                <div class="col-xs-12 col-sm-5">
                    <span class="block input-icon input-icon-right">
                        <input type="text" required="required" id="form-field-7" placeholder="亮度" name="bri"
                               title="请输入亮度"
                               class="width-100"/>
                        <i class="ace-icon fa fa-times-circle hide"></i>
                    </span>
                </div>
            </div>
            <!-- 亮度 ends -->

            <!-- 价格 begins -->
            <div class="form-group">
                <label for="form-field-8" class="col-xs-12 col-sm-3 control-label no-padding-right">价格(单位:元)<b
                        class="text-danger">&nbsp;*</b></label>

                <div class="col-xs-12 col-sm-5">
                    <span class="block input-icon input-icon-right">
                        <input type="number" required="required" id="form-field-8" placeholder="价格(单位:元)" name="price"
                               title="请输入价格"
                               class="width-100"/>
                        <i class="ace-icon fa fa-times-circle hide"></i>
                    </span>
                </div>
            </div>
            <!-- 价格 ends -->

            <!-- 提交，重置按钮 begins-->
            <div class="clearfix form-actions">
                <div class="col-md-offset-3 col-md-9">
                    <button class="btn btn-info" type="submit">
                        <i class="ace-icon fa fa-check bigger-110"></i>
                        保存
                    </button>

                    &nbsp; &nbsp; &nbsp;
                    <button class="btn" type="reset">
                        <i class="ace-icon fa fa-undo bigger-110"></i>
                        重置
                    </button>
                    &nbsp; &nbsp; &nbsp;
                    <a class="btn btn-primary" data-url="page/admin/led/led-produce-list.html"
                       href="#page/admin/led/led-produce-list.html">
                        <i class="ace-icon fa fa-reply bigger-110"></i>
                        返回
                    </a>
                </div>
            </div>
            <div class="hr hr-24"></div>
            <!-- 提交，重置按钮 ends-->

        </form>
        <!-- PAGE CONTENT ENDS -->
    </div>
    <!-- /.col -->
</div><!-- /.row -->
<!-- page specific plugin scripts -->
<script type="text/javascript">
    console.info("led-produce")
    var scripts = [null,
        "../../assets/js/jquery-ui.custom.js",
        "../../assets/js/jquery.ui.touch-punch.js",
        "../../assets/js/chosen.jquery.js",
        '../../assets/js/bootbox.js',
        {url: "../../assets/js/validity.state.js", cache: false},
        {url: "../../assets/js/jquery.iframe-post-form.js", cache: false},
        null]
    $('.page-content-area').ace_ajax('loadScripts', scripts, function () {
        var id = getParameterByName("id");
        if (id != null) {
            $.ajax('/led/edit',
                    {
                        contentType: 'application/json; charset=utf-8',
                        data: JSON.stringify({id: id}),
                        dataType: "json",
                        type: "post",
                        beforeSend: function() {
                            console.info('beforeSend');
                            $('.page-content-area').ace_ajax('startLoading');
                        }
                    }).success(function (result) {
                        console.info('success');
                    }).complete(function (jqXHR, textStatus) {
                        console.info('complete');
//                        $('.page-content-area').ace_ajax('stopLoading', true);
                    });
        }


        $('form[role="form"]').iframePostForm({
            json: true,
            post: function () {
                $('.page-content-area').ace_ajax('startLoading');
            },
            complete: function (response) {
                $('.page-content-area').ace_ajax('stopLoading', true);
                if (response.success) {
                    bootbox.dialog({
                        closeButton: false,
                        message: "<h5 class='bigger-110'>添加成功</h5>",
                        buttons: {
                            "proceed": {
                                "label": "<i class='ace-icon fa fa-check'></i> 继续添加",
                                "className": "btn-sm btn-success",
                                "callback": function () {
                                    var url = '#page/admin/led/led-produce-edit.html';
                                    $('.page-content-area[data-ajax-content=true]').ace_ajax('loadUrl', url);
                                    window.location.href = url;
                                }
                            },
                            "back": {
                                "label": "<i class='ace-icon fa fa-reply'></i> 返回列表页面",
                                "className": "btn-sm btn-primary",
                                "callback": function () {
                                    //Example.show("Primary button");
                                    var url = '#page/admin/led/led-produce-list.html';
                                    $('.page-content-area[data-ajax-content=true]').ace_ajax('loadUrl', url);
                                    window.location.href = url;
                                }
                            }
                        }
                    });
                }
            }
        })
    });

    function getParameterByName(variable) {
        var href = window.location.href;
        var query = href;
        var lastIndex = window.location.href.lastIndexOf("?");
        if (lastIndex > 0) {
            query = href.substring(lastIndex + 1, href.length);
            console.info(query)
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (pair[0] == variable) {
                    return pair[1];
                }
            }
        }
        return null;
    }
</script>
